---
title: "EDA: 3D IC Placement"
---

## DREAMPlace Naming Manual 命名法

- `flat_netpin`, `netpin_start`: 见下方 pin-list 表示法 (CSR).

<!-- ----------------------------------------- -->
::: {.callout-note icon=true collapse=true}
## pin-list 表示法 (CSR)

我们的目标是设计一种储存 net-pin 对应关系的数据结构. 首先将所有 net 的所有 pin 安排上**全局索引**. E.g., 假设我们有 $3$ 个 net, 分别包含以下 pin (用全局索引表示):

```plain
net0 = [p1, p7, p3]
net1 = [p8, p2]
net2 = [p6, p5, p9, p4]
```

将上述 pin 展平来定义 `flat_netpin` 数组:

```plain
flat_netpin = [p1, p7, p3, p8, p2, p6, p5, p9, p4]
``` 

当然实际上我们会用 pin 的全局索引值来表示 pin:

```cpp
int flat_netpin[] = {1, 7, 3, 8, 2, 6, 5, 9, 4};
```

再定义 `netpin_start` 数组来记录每个 net 的起始位置:

```cpp
int netpin_start[] = {0, 3, 5, 9};
```

这样, net-pin 对应关系就编码在了两个数组 `flat_netpin` 和 `netpin_start` 中. 这种方法 **节省内存空间、方便 GPU 并行处理**.
:::
<!-- ----------------------------------------- -->

- 



## Environment Setup

<!-- ----------------------------------------- -->
::: {.callout-note icon=true collapse=true}
## MacOS (未成功)

Clone 仓库:

```bash
git clone <repository-url>
git submodule update --init --recursive
```

创建 `Python` 环境:

```bash
conda create -n cupid python=3.9
conda activate cupid
pip install torch torchvision torchaudio
pip install pyunpack patool matplotlib cairocffi pkgconfig scipy
pip install "numpy>=1.15.4,<2.0"
pip install setuptools
mkdir -p build
cd build
```

安装 `openMP` 支持:

```bash
brew install libomp
brew --prefix libomp
export OpenMP_ROOT=/opt/homebrew/opt/libomp
export OpenMP_CXX_FLAGS="-Xpreprocessor -fopenmp -I/opt/homebrew/opt/libomp/include"
export OpenMP_CXX_LIB_NAMES="omp"
export OpenMP_omp_LIBRARY=/opt/homebrew/opt/libomp/lib/libomp.dylib
```

安装 `bison`:

```bash
brew install bison
```
:::
<!-- ----------------------------------------- -->


